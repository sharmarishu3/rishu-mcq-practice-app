<!DOCTYPE html>
<html>
<head>
    <title>MCQ Test</title>
    <script>
        let index = 0;
        let score = 0;
        let questions = {{ questions | tojson }};

        function loadQuestion() {
            document.getElementById("q").innerText =
                (index + 1) + ". " + questions[index].question;

            let opts = document.getElementsByClassName("opt");
            for (let i = 0; i < 4; i++) {
                opts[i].innerText = questions[index].options[i];
                opts[i].style.background = "#eee";
            }
        }

        function checkAnswer(btn) {
            if (btn.innerText === questions[index].answer) {
                btn.style.background = "lightgreen";
                score++;
            } else {
                btn.style.background = "#ffb3b3";
            }
        }

        function nextQ() {
            index++;
            if (index < questions.length) {
                loadQuestion();
            } else {
                document.body.innerHTML =
                    "<h2>Test Finished</h2>" +
                    "<h3>Score: " + score + "/" + questions.length + "</h3>" +
                    "<button onclick='location.reload()'>Restart</button>";
            }
        }

        window.onload = loadQuestion;
    </script>
</head>

<body style="text-align:center;margin-top:100px">

<h2 id="q"></h2>

<div>
    <button class="opt" onclick="checkAnswer(this)"></button><br><br>
    <button class="opt" onclick="checkAnswer(this)"></button><br><br>
    <button class="opt" onclick="checkAnswer(this)"></button><br><br>
    <button class="opt" onclick="checkAnswer(this)"></button><br><br>
</div>

<button onclick="nextQ()">Next</button>

</body>
</html>
